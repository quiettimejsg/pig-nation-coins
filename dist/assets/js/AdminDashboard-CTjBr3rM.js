const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/utils-YxF-Kp8o.js","assets/js/vendor-CXUWDbkB.js","assets/js/index-BLUzL_4y.js","assets/js/router-Buckysma.js","assets/css/index-DvAAMwRb.css"])))=>i.map(i=>d[i]);
import{u as s,a,j as e,_ as t}from"./index-BLUzL_4y.js";import{a as n}from"./utils-YxF-Kp8o.js";import{u as l}from"./router-Buckysma.js";import"./vendor-CXUWDbkB.js";function c(){const{t:t}=s(),c=l(),{currentUser:i}=a(),[r,d]=n.useState([]),[o,m]=n.useState([]),[h,u]=n.useState({totalUsers:0,totalTransactions:0,totalVolume:0});return n.useEffect((()=>{if(!i||"admin"!==i.role)return void c("/");const s=a.getState().users,e=s?Object.values(s):[],t=a.getState().transactions||[];d(e),m(t),u({totalUsers:e.length,totalTransactions:t.length,totalVolume:t.reduce(((s,a)=>s+a.amount),0)})}),[i,c]),i?e.jsx("div",{className:"admin-dashboard-page",children:e.jsxs("div",{className:"content-with-glass",children:[e.jsx("h1",{children:t("admin.welcome",{fallback:"管理员控制台"})}),e.jsxs("div",{className:"stats-cards",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:t("admin.total_users",{fallback:"总用户数"})}),e.jsx("p",{className:"stat-value",children:h.totalUsers})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:t("admin.total_transactions",{fallback:"总交易数"})}),e.jsx("p",{className:"stat-value",children:h.totalTransactions})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:t("admin.total_volume",{fallback:"总交易额"})}),e.jsxs("p",{className:"stat-value",children:["¥",h.totalVolume.toFixed(2)]})]})]}),e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:t("admin.recent_users",{fallback:"最近用户"})}),0===r.length?e.jsx("p",{className:"no-data",children:t("admin.no_users",{fallback:"暂无用户数据"})}):e.jsx("ul",{className:"user-list",children:r.slice(0,5).map(((s,a)=>{var t;return e.jsxs("li",{className:"user-item",children:[e.jsxs("div",{className:"user-info",children:[e.jsx("span",{className:"username",children:s.username}),e.jsx("span",{className:"user-role",children:s.role})]}),e.jsxs("span",{className:"user-balance",children:["¥",null==(t=s.balance)?void 0:t.toFixed(2)]})]},s.id||a)}))})]}),e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:t("admin.recent_transactions",{fallback:"最近交易"})}),0===o.length?e.jsx("p",{className:"no-data",children:t("admin.no_transactions",{fallback:"暂无交易数据"})}):e.jsx("ul",{className:"transaction-list",children:o.slice(0,5).map(((s,a)=>e.jsxs("li",{className:"transaction-item",children:[e.jsxs("div",{className:"transaction-details",children:[e.jsx("span",{className:"transaction-date",children:new Date(s.timestamp).toLocaleDateString()}),e.jsx("span",{className:"transaction-user",children:s.username}),e.jsx("span",{className:"transaction-type",children:t(`transaction.${s.type}`,{fallback:s.type})})]}),e.jsxs("span",{className:"transaction-amount",children:["¥",s.amount.toFixed(2)]})]},s.id||a)))})]})]})}):null}class i extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"});const s=document.createElement("div");this.shadowRoot.appendChild(s),t((()=>import("./utils-YxF-Kp8o.js").then((s=>s.i))),__vite__mapDeps([0,1])).then((a=>{t((()=>import("./index-BLUzL_4y.js").then((s=>s.c))),__vite__mapDeps([2,0,1,3,4])).then((e=>{e.createRoot(s).render(a.createElement(c))}))}))}disconnectedCallback(){this.shadowRoot&&(this.shadowRoot.innerHTML="")}}customElements.get("admin-dashboard")||customElements.define("admin-dashboard",i);export{c as default};
