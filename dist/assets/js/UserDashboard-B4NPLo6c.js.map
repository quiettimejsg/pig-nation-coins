{"version":3,"file":"UserDashboard-B4NPLo6c.js","sources":["../../../src/views/UserDashboard.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useStore } from '../store';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../styles/UserDashboard.css';\r\n\r\nexport default function UserDashboard() {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const [transactions, setTransactions] = useState([]);\r\n  const { currentUser } = useStore();\r\n  \r\n  useEffect(() => {\r\n    // 检查用户是否已登录\r\n    if (!currentUser) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    \r\n    // 获取用户交易记录（从store中）\r\n    const userTransactions = useStore.getState().transactions || [];\r\n    // 过滤当前用户的交易\r\n    const filteredTransactions = userTransactions.filter(\r\n      tx => tx.username === currentUser.username\r\n    );\r\n    setTransactions(filteredTransactions);\r\n  }, [currentUser, navigate]);\r\n  \r\n  if (!currentUser) return null;\r\n  \r\n  const handleGoToDeviceManagement = () => {\r\n    navigate('/device-management');\r\n  };\r\n  \r\n  return (\r\n    <div className=\"user-dashboard-page\">\r\n      <div className=\"content-with-glass\">\r\n        <h1>{t('user.welcome')}, {currentUser.username}!</h1>\r\n        \r\n        <div className=\"user-info-card\">\r\n          <div className=\"user-balance\">\r\n            <h2>{t('user.balance')}</h2>\r\n            <p className=\"balance-amount\">¥{currentUser.balance?.toFixed(2)}</p>\r\n          </div>\r\n          \r\n          <button \r\n            className=\"device-management-button\"\r\n            onClick={handleGoToDeviceManagement}\r\n          >\r\n            {t('user_dashboard.deviceManagement')}\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"transactions-section\">\r\n          <h2>{t('user.recent_transactions')}</h2>\r\n          \r\n          {transactions.length === 0 ? (\r\n            <p className=\"no-transactions\">{t('user.no_transactions')}</p>\r\n          ) : (\r\n            <ul className=\"transaction-list\">\r\n              {transactions.map(tx => (\r\n                <li key={tx.id} className={`transaction-item ${tx.type}`}>\r\n                  <div className=\"transaction-details\">\r\n                    <span className=\"transaction-date\">\r\n                      {new Date(tx.timestamp).toLocaleDateString()}\r\n                    </span>\r\n                    <span className=\"transaction-type\">\r\n                      {t(`transaction.${tx.type}`)}\r\n                    </span>\r\n                  </div>\r\n                  <span className={`transaction-amount ${tx.type === 'payment' ? 'negative' : 'positive'}`}>\r\n                    {tx.type === 'payment' ? '-' : '+'} ¥{tx.amount.toFixed(2)}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["UserDashboard","t","useTranslation","navigate","useNavigate","transactions","setTransactions","useState","currentUser","useStore","useEffect","filteredTransactions","getState","filter","tx","username","className","children","_jsxs","_jsx","balance","toFixed","onClick","handleGoToDeviceManagement","length","map","type","Date","timestamp","toLocaleDateString","amount","id"],"mappings":"+JAMA,SAAwBA,UAChB,MAAAC,EAAEA,GAAMC,IACRC,EAAWC,KACVC,EAAcC,GAAmBC,EAAAA,SAAS,KAC3CC,YAAEA,GAAgBC,IAkBpB,GAhBJC,EAAAA,WAAU,KAER,IAAKF,EAEH,YADAL,EAAS,KAKX,MAEMQ,GAFmBF,EAASG,WAAWP,cAAgB,IAEfQ,WACtCC,EAAGC,WAAaP,EAAYO,WAEpCT,EAAgBK,EAAoB,GACnC,CAACH,EAAaL,KAEZK,EAAoB,OAAA,kBAOvB,MAAA,CAAKQ,UAAU,sBAAqBC,gBAClC,MAAA,CAAKD,UAAU,qBAAoBC,UACjCC,EAAAA,KAAA,KAAA,CAAAD,SAAKhB,CAAAA,EAAE,gBAAgB,KAAGO,EAAYO,SAAS,OAE/CG,EAAAA,KAAA,MAAA,CAAKF,UAAU,iBAAgBC,UAC7BC,EAAAA,KAAA,MAAA,CAAKF,UAAU,eAAcC,UAC3BE,EAAAA,IAAA,KAAA,CAAAF,SAAKhB,EAAE,kBACPiB,EAAAA,KAAA,IAAA,CAAGF,UAAU,iBAAgBC,SAAA,CAAC,IAAET,OAAAA,IAAYY,cAAZZ,EAAAA,EAAqBa,QAAQ,SAG/DF,EAAAA,IAAA,SAAA,CACEH,UAAU,2BACVM,QAjByBC,KACjCpB,EAAS,qBAAoB,EAgBec,SAEnChB,EAAE,wCAIPiB,EAAAA,KAAA,MAAA,CAAKF,UAAU,uBAAsBC,UACnCE,EAAAA,IAAA,KAAA,CAAAF,SAAKhB,EAAE,8BAEkB,IAAxBI,EAAamB,aACZ,IAAA,CAAGR,UAAU,kBAAiBC,SAAEhB,EAAE,0BAElCkB,EAAAA,IAAA,KAAA,CAAIH,UAAU,mBAAkBC,SAC7BZ,EAAaoB,KAAIX,UAChB,KAAA,CAAgBE,UAAW,oBAAoBF,EAAGY,OAAOT,UACvDC,EAAAA,KAAA,MAAA,CAAKF,UAAU,sBAAqBC,UAClCE,EAAAA,IAAA,OAAA,CAAMH,UAAU,mBAAkBC,SAC/B,IAAIU,KAAKb,EAAGc,WAAWC,uBAE1BV,EAAAA,IAAA,OAAA,CAAMH,UAAU,mBAAkBC,SAC/BhB,EAAE,eAAea,EAAGY,aAGzBR,EAAAA,KAAA,OAAA,CAAMF,UAAW,uBAAkC,YAAZF,EAAGY,KAAqB,WAAa,YAAaT,SAAA,CAC1E,YAAZH,EAAGY,KAAqB,IAAM,IAAI,KAAGZ,EAAGgB,OAAOT,QAAQ,QAVnDP,EAAGiB,eAoB5B"}