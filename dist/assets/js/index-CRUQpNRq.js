const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/UserDashboard-B4NPLo6c.js","assets/js/utils-Cl091Plo.js","assets/js/vendor-CXUWDbkB.js","assets/js/router-CcLlW1qC.js","assets/css/UserDashboard-RVcq0sc6.css","assets/js/NotFound-DaBATu5q.js","assets/js/DeviceManagementView-Li6j1AZg.js","assets/css/DeviceManagementView-BrVJUQGu.css"])))=>i.map(i=>d[i]);
import{a as e,i as t,c as n,R as r,r as a}from"./utils-Cl091Plo.js";import{r as o,u as s,O as i,L as l,c,a as u,R as d}from"./router-CcLlW1qC.js";import"./vendor-CXUWDbkB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var m,g={};var h=function(){if(m)return g;m=1;var e=o();return g.createRoot=e.createRoot,g.hydrateRoot=e.hydrateRoot,g}();function p(e,t){let n;try{n=e()}catch(r){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=n.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}const f=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>f(e)(n),catch(e){return this}}}catch(n){return{then(e){return this},catch:e=>f(e)(n)}}},v=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(n,r,a)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const i=new Set,l=new Set;let c;try{c=o.getStorage()}catch(v){}if(!c)return e(((...e)=>{n(...e)}),r,a);const u=f(o.serialize),d=()=>{const e=o.partialize({...r()});let t;const n=u({state:e,version:o.version}).then((e=>c.setItem(o.name,e))).catch((e=>{t=e}));if(t)throw t;return n},m=a.setState;a.setState=(e,t)=>{m(e,t),d()};const g=e(((...e)=>{n(...e),d()}),r,a);let h;const p=()=>{var e;if(!c)return;s=!1,i.forEach((e=>e(r())));const t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,r()))||void 0;return f(c.getItem.bind(c))(o.name).then((e=>{if(e)return o.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version)}})).then((e=>{var t;return h=o.merge(e,null!=(t=r())?t:g),n(h,!0),d()})).then((()=>{null==t||t(h,void 0),s=!0,l.forEach((e=>e(h)))})).catch((e=>{null==t||t(void 0,e)}))};return a.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},p(),h||g})(e,t):((e,t)=>(n,r,a)=>{let o={storage:p((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const i=new Set,l=new Set;let c=o.storage;if(!c)return e(((...e)=>{n(...e)}),r,a);const u=()=>{const e=o.partialize({...r()});return c.setItem(o.name,{state:e,version:o.version})},d=a.setState;a.setState=(e,t)=>{d(e,t),u()};const m=e(((...e)=>{n(...e),u()}),r,a);let g;a.getInitialState=()=>m;const h=()=>{var e,t;if(!c)return;s=!1,i.forEach((e=>{var t;return e(null!=(t=r())?t:m)}));const a=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=r())?e:m))||void 0;return f(c.getItem.bind(c))(o.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate)return[!0,o.migrate(e.state,e.version)]}return[!1,void 0]})).then((e=>{var t;const[a,s]=e;if(g=o.merge(s,null!=(t=r())?t:m),n(g,!0),a)return u()})).then((()=>{null==a||a(g,void 0),g=r(),s=!0,l.forEach((e=>e(g)))})).catch((e=>{null==a||a(void 0,e)}))};return a.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>h(),hasHydrated:()=>s,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},o.skipHydration||h(),g||m})(e,t),b={},y=(e,t,n,r)=>{k(n)&&b[n]||(k(n)&&(b[n]=new Date),((e,t,n,r)=>{var a,o,s,i;const l=[n,{code:t,...r||{}}];if(null==(o=null==(a=null==e?void 0:e.services)?void 0:a.logger)?void 0:o.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);k(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(null==(i=null==(s=null==e?void 0:e.services)?void 0:s.logger)?void 0:i.warn)?e.services.logger.warn(...l):null==console||console.warn})(e,t,n,r))},_=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout((()=>{e.off("initialized",n)}),0),t()};e.on("initialized",n)}},w=(e,t,n)=>{e.loadNamespaces(t,_(e,n))},x=(e,t,n,r)=>{if(k(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return w(e,n,r);n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,_(e,r))},k=e=>"string"==typeof e,E=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,S={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},N=e=>S[e];let j={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(E,N)};let C;const P={type:"3rdParty",init(e){((e={})=>{j={...j,...e}})(e.options.react),(e=>{C=e})(e)}},M=e.createContext();class R{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const I=(e,t,n,r)=>e.getFixedT(t,n,r),O=(t,n={})=>{var r,a,o,s;const{i18n:i}=n,{i18n:l,defaultNS:c}=e.useContext(M)||{},u=i||l||C;if(u&&!u.reportNamespaces&&(u.reportNamespaces=new R),!u){y(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return k(t)?t:"object"==typeof(n=t)&&null!==n&&k(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}(null==(r=u.options.react)?void 0:r.wait)&&y(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...j,...u.options.react,...n},{useSuspense:m,keyPrefix:g}=d;let h=c||(null==(a=u.options)?void 0:a.defaultNS);h=k(h)?[h]:h||["translation"],null==(s=(o=u.reportNamespaces).addUsedNamespaces)||s.call(o,h);const p=(u.isInitialized||u.initializedStoreOnce)&&h.every((e=>((e,t,n={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{var a;if((null==(a=n.bindI18n)?void 0:a.indexOf("languageChanging"))>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(y(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,u,d))),f=((t,n,r,a)=>e.useCallback(I(t,n,r,a),[t,n,r,a]))(u,n.lng||null,"fallback"===d.nsMode?h:h[0],g),v=()=>f,b=()=>I(u,n.lng||null,"fallback"===d.nsMode?h:h[0],g),[_,E]=e.useState(v);let S=h.join();n.lng&&(S=`${n.lng}${S}`);const N=((t,n)=>{const r=e.useRef();return e.useEffect((()=>{r.current=t}),[t,n]),r.current})(S),P=e.useRef(!0);e.useEffect((()=>{const{bindI18n:e,bindI18nStore:t}=d;P.current=!0,p||m||(n.lng?x(u,n.lng,h,(()=>{P.current&&E(b)})):w(u,h,(()=>{P.current&&E(b)}))),p&&N&&N!==S&&P.current&&E(b);const r=()=>{P.current&&E(b)};return e&&(null==u||u.on(e,r)),t&&(null==u||u.store.on(t,r)),()=>{P.current=!1,u&&(null==e||e.split(" ").forEach((e=>u.off(e,r)))),t&&u&&t.split(" ").forEach((e=>u.store.off(e,r)))}}),[u,S]),e.useEffect((()=>{P.current&&p&&E(v)}),[u,g,p]);const O=[_,u,p];if(O.t=_,O.i18n=u,O.ready=p,p)return O;if(!p&&!m)return O;throw new Promise((e=>{n.lng?x(u,n.lng,h,(()=>e())):w(u,h,(()=>e()))}))};function z({i18n:t,defaultNS:n,children:r}){const a=e.useMemo((()=>({i18n:t,defaultNS:n})),[t,n]);return e.createElement(M.Provider,{value:a},r)}const A={html_meta:{title:"Pig Nation e-Coin",description:"Official digital currency exchange platform of Pig Nation"},app:{footer_copyright:""},app_name:"Pig Coin System",nav:{home:"Home",dashboard:"Dashboard",transactions:"Transactions",logout:"Logout",login:"Login",user_panel:"User Panel",merchant_panel:"Merchant Panel",admin_panel:"Admin Panel",payment:"Payment"},navigation:{login_page:{login:"Login",userPanel:"User Panel",merchantPanel:"Merchant Dashboard",adminPanel:"Admin Panel"},transactionType:{deposit:"Deposit",withdrawal:"Withdrawal",payment:"Payment"}},language:{zh:"Chinese",en:"English",ja:"Japanese",select:"Select Language"},theme:{toggle:"Toggle Theme",light:"Light Mode",dark:"Dark Mode"},login:{title_username:"Login Account",title_verification:"Verification",title_qr_login:"QR Code Login",title_register:"Register Account",username_required:"Please enter your username",username_placeholder:"Enter your username",totp_required:"Please enter verification code",totp_placeholder:"Enter 6-digit code",totp_length_error:"Verification code must be 6 digits",user_not_found:"User not found",totp_invalid:"Invalid verification code, please check your authenticator app",login_failed:"Login failed, please try again",qr_init_failed:"QR code generation failed, please try again",qr_scanned:"Scanned, please confirm on your mobile device",qr_scan_hint:"Scan this QR code with the Pig Coin APP for quick login",refresh_qr:"Refresh QR Code",use_totp_login:"Use Authenticator Login",use_qr_login:"QR Code Login",test_account_title:"Test Account Info",test_account_description:"In development environment, any username and 6-digit verification code will work",test_account_production:"In production, real TOTP verification will be used",modify:"Modify",processing:"Processing...",verifying:"Verifying...",password_required:"Please enter password",password_placeholder:"Enter password",confirm_password_required:"Please confirm password",confirm_password_placeholder:"Enter password again",passwords_not_match:"Passwords do not match",register_button:"Register",register_success:"Registration successful, please login",register_failed:"Registration failed, please try again",no_account_register:"No account? Register",already_have_account:"Already have an account? Login",select_role:"Select Role",role_user:"Normal User",role_merchant:"Merchant"},user_dashboard:{userInfo:"User Information",username:"Username",balance:"Account Balance",recentTransactions:"Recent Transactions",deviceManagement:"Device Management"},admin_dashboard:{title:"Admin Management System",totalUsers:"Total Users",dailyTransactions:"Daily Transactions",systemBalance:"System Balance",userManagement:"User Management",role:"Role",actions:"Actions",disableUser:"Disable",transactionAudit:"Transaction Audit",verifyTransaction:"Verify"},merchant_dashboard:{title:"Merchant Management System",businessInfo:"Business Information",balance:"Account Balance",transactions:"Transaction Volume",recentTransactions:"Recent Transactions",settleAccount:"Merchant Settlement",viewStatement:"View Statement"},transactionType:{deposit:"Deposit",withdrawal:"Withdrawal",payment:"Payment",adjustment:"Balance Adjustment"},login_page:{error:{auth:"Authentication failed"},title:"Pig Coin System Login",username:"Username",password:"Password",usernameRequired:"Username is required",passwordRequired:"Password is required",usernamePlaceholder:"Username",passwordPlaceholder:"Password",submitButton:"Sign In",submitError:"Authentication failed. Please verify your credentials and try again."},payment:{generate_code:"Generate Payment Code",enter_amount:"Enter Payment Amount",scan_code:"Scan Payment Code",scan_result:"Scan Result",confirm_payment:"Confirm Payment",payment_success:"Payment Successful",payment_failed:"Payment Failed",login_required:"Please login to use payment features",current_balance:"Current Balance",insufficient_funds:"Insufficient funds to complete payment"},not_found:{title:"Page Not Found",message:"The page you are looking for does not exist",back:"Back to Home"},error_page:{title:"An Error Occurred",message:"Sorry, there was a problem loading this page. Please try the following:",back_home:"Back to Home"},common:{loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",network_error:"Network error. Please check your connection and try again.",logout:"Logout",user_not_found:"User not found",invalid_amount:"Invalid amount"},user:{welcome:"Welcome",balance:"Account Balance",recent_transactions:"Recent Transactions",no_transactions:"No Transactions"},device_management:{title:"Device Management",description:"Manage your logged-in devices. Trusted devices can login without secondary verification.",current_device:"Current Device",last_active:"Last Active:",just_now:"Just now",minutes_ago:"minutes ago",hours_ago:"hours ago",days_ago:"days ago",trust_device:"Trust Device",untrust_device:"Untrust Device",trusted:"Trusted",remove:"Remove",remove_tooltip:"Remove from logged-in devices",confirm_remove:"Confirm Remove",cancel:"Cancel",loading:"Loading device list...",no_devices:"No logged-in devices found",error:"Failed to load device list, please try again later",remove_failed:"Failed to remove device",trust_failed:"Failed to change device trust status",sign_out_all:"Sign Out All Other Devices"}},L={html_meta:{title:"猪之国电子猪币",description:"猪之国官方数字货币交易平台"},app:{footer_copyright:""},app_name:"猪币系统",nav:{home:"首页",dashboard:"仪表板",transactions:"交易记录",logout:"退出登录",login:"登录",user_panel:"用户面板",merchant_panel:"商户管理界面",admin_panel:"管理界面",payment:"支付"},navigation:{login_page:{login:"登录",userPanel:"用户面板",merchantPanel:"商户管理界面",adminPanel:"管理界面"},transactionType:{deposit:"存款",withdrawal:"取款",payment:"支付"}},language:{zh:"中文",en:"英语",ja:"日语",select:"选择语言"},theme:{toggle:"主题切换",light:"白天模式",dark:"黑夜模式"},login:{title_username:"登录账户",title_verification:"身份验证",title_qr_login:"扫码登录",title_register:"注册账户",username_required:"请输入用户名",username_placeholder:"请输入用户名",totp_required:"请输入验证码",totp_placeholder:"请输入6位验证码",totp_length_error:"验证码必须为6位数字",user_not_found:"用户不存在",totp_invalid:"验证码无效，请检查您的身份验证器应用",login_failed:"登录失败，请重试",qr_init_failed:"二维码生成失败，请重试",qr_scanned:"已扫描，请在手机上确认",qr_scan_hint:"使用小猪币APP扫描此二维码快速登录",refresh_qr:"刷新二维码",use_totp_login:"使用身份验证器登录",use_qr_login:"二维码登录",test_account_title:"测试账户说明",test_account_description:"在开发环境中，任意用户名和6位数字验证码均可登录",test_account_production:"在生产环境中将使用真实的TOTP验证",modify:"修改",processing:"处理中...",verifying:"验证中...",password_required:"请输入密码",password_placeholder:"请输入密码",confirm_password_required:"请确认密码",confirm_password_placeholder:"请再次输入密码",passwords_not_match:"两次输入的密码不一致",register_button:"注册",register_success:"注册成功，请登录",register_failed:"注册失败，请重试",no_account_register:"没有账号？注册",already_have_account:"已有账号？去登录",select_role:"选择角色",role_user:"普通用户",role_merchant:"商户"},user_dashboard:{userInfo:"用户信息",username:"用户名",balance:"账户余额",recentTransactions:"近期交易",deviceManagement:"设备管理"},admin_dashboard:{title:"后台管理系统",totalUsers:"总用户数",dailyTransactions:"今日交易量",systemBalance:"系统余额",userManagement:"用户管理",role:"权限角色",actions:"操作",disableUser:"禁用",transactionAudit:"交易审计",verifyTransaction:"验证交易"},merchant_dashboard:{title:"商户管理系统",businessInfo:"商户信息",balance:"账户余额",transactions:"总交易量",recentTransactions:"近期交易记录",settleAccount:"结算账户",viewStatement:"查看对账单"},transactionType:{deposit:"存款",withdrawal:"取款",payment:"支付",adjustment:"余额调整"},login_page:{error:{auth:"认证失败"},title:"猪币系统登录",username:"用户名",password:"密码",usernameRequired:"请输入用户名",passwordRequired:"请输入密码",usernamePlaceholder:"请输入用户名",passwordPlaceholder:"请输入密码",submitButton:"登录",submitError:"登录失败，请检查用户名和密码后重试"},payment:{generate_code:"生成支付码",enter_amount:"输入支付金额",scan_code:"扫描收款码",scan_result:"扫描结果",confirm_payment:"确认支付",payment_success:"支付成功",payment_failed:"支付失败",login_required:"请先登录再使用支付功能",current_balance:"当前余额",insufficient_funds:"余额不足，无法完成支付"},not_found:{title:"页面未找到",message:"您查找的页面不存在",back:"返回首页"},error_page:{title:"发生错误",message:"抱歉，当前页面加载出现问题，请尝试以下操作：",back_home:"返回首页"},common:{loading:"加载中...",error:"错误",success:"成功",confirm:"确认",cancel:"取消",save:"保存",delete:"删除",edit:"编辑",network_error:"网络错误，请检查网络连接并重试",logout:"退出登录",user_not_found:"找不到用户",invalid_amount:"无效的金额"},user:{welcome:"欢迎",balance:"账户余额",recent_transactions:"近期交易",no_transactions:"暂无交易记录"},device_management:{title:"设备管理",description:"管理已登录的设备。受信任的设备可以无需二次验证登录。",current_device:"当前设备",last_active:"最后活跃:",just_now:"刚刚",minutes_ago:"分钟前",hours_ago:"小时前",days_ago:"天前",trust_device:"信任此设备",untrust_device:"取消信任",trusted:"已信任",remove:"移除",remove_tooltip:"从登录设备中移除",confirm_remove:"确认移除",cancel:"取消",loading:"正在加载设备列表...",no_devices:"没有找到登录设备",error:"加载设备列表失败，请稍后重试",remove_failed:"移除设备失败",trust_failed:"更改设备信任状态失败",sign_out_all:"登出所有其他设备"}},T={html_meta:{title:"ピッグネーション電子コイン",description:"ピッグネーション公式デジタル通貨交換プラットフォーム"},app:{footer_copyright:""},app_name:"ピッグコインシステム",nav:{home:"ホーム",dashboard:"ダッシュボード",transactions:"取引履歴",logout:"ログアウト",login:"ログイン",user_panel:"ユーザーパネル",merchant_panel:"マーチャントパネル",admin_panel:"管理者パネル",payment:"支払い"},navigation:{login_page:{login:"ログイン",userPanel:"ユーザーパネル",merchantPanel:"マーチャントダッシュボード",adminPanel:"管理者パネル"},transactionType:{deposit:"入金",withdrawal:"出金",payment:"支払い"}},language:{zh:"中国語",en:"英語",ja:"日本語",select:"言語を選択"},theme:{toggle:"テーマ切替",light:"ライトモード",dark:"ダークモード"},login:{title_username:"アカウントログイン",title_verification:"認証",title_qr_login:"QRコードログイン",title_register:"アカウント登録",username_required:"ユーザー名を入力してください",username_placeholder:"ユーザー名を入力してください",totp_required:"認証コードを入力してください",totp_placeholder:"6桁のコードを入力",totp_length_error:"認証コードは6桁である必要があります",user_not_found:"ユーザーが見つかりません",totp_invalid:"認証コードが無効です、認証アプリを確認してください",login_failed:"ログインに失敗しました、再試行してください",qr_init_failed:"QRコード生成に失敗しました、再試行してください",qr_scanned:"スキャン完了、モバイルデバイスで確認してください",qr_scan_hint:"ピッグコインアプリでこのQRコードをスキャンして素早くログインしてください",refresh_qr:"QRコードを更新",use_totp_login:"認証アプリを使用",use_qr_login:"QRコードログイン",test_account_title:"テストアカウント情報",test_account_description:"開発環境では、任意のユーザー名と6桁の認証コードでログインできます",test_account_production:"本番環境では、実際のTOTP認証が使用されます",modify:"変更",processing:"処理中...",verifying:"確認中...",password_required:"パスワードを入力してください",password_placeholder:"パスワードを入力",confirm_password_required:"パスワードを確認してください",confirm_password_placeholder:"もう一度パスワードを入力",passwords_not_match:"パスワードが一致しません",register_button:"登録",register_success:"登録成功、ログインしてください",register_failed:"登録に失敗しました、再試行してください",no_account_register:"アカウントをお持ちでない方はこちら",already_have_account:"すでにアカウントをお持ちの方はこちら",select_role:"ロールを選択",role_user:"一般ユーザー",role_merchant:"販売者"},user_dashboard:{welcome:"ようこそ",userInfo:"ユーザー情報",username:"ユーザー名",balance:"口座残高",recentTransactions:"最近の取引",deviceManagement:"デバイス管理"},admin_dashboard:{title:"管理システム",totalUsers:"総ユーザー数",dailyTransactions:"本日の取引量",systemBalance:"システム残高",userManagement:"ユーザー管理",role:"権限",actions:"操作",disableUser:"無効化",transactionAudit:"取引監査",verifyTransaction:"検証する"},merchant_dashboard:{title:"販売者管理システム",businessInfo:"販売者情報",balance:"口座残高",transactions:"総取引量",recentTransactions:"最近の取引記録",settleAccount:"決済口座",viewStatement:"取引明細を表示"},transactionType:{deposit:"預金",withdrawal:"引き出し",payment:"支払い",adjustment:"残高調整"},login_page:{error:{auth:"認証に失敗しました。ユーザー名とパスワードを確認してください"},title:"Pigコインシステム ログイン",username:"ユーザー名",password:"パスワード",usernameRequired:"ユーザー名を入力してください",passwordRequired:"パスワードを入力してください",usernamePlaceholder:"ユーザー名を入力",passwordPlaceholder:"パスワードを入力",submitButton:"ログイン",submitError:"ログインに失敗いたしました。もう一度お試しください"},payment:{generate_code:"支払いコードを生成",enter_amount:"金額を入力してください",scan_code:"支払いコードをスキャン",scan_result:"スキャン結果",confirm_payment:"支払いを確認",payment_success:"支払い完了",payment_failed:"支払い失敗",login_required:"支払い機能を使用するにはログインしてください",current_balance:"現在の残高",insufficient_funds:"残高不足のため、支払いを完了できません"},not_found:{title:"ページが見つかりません",message:"お探しのページは存在しません",back:"ホームに戻る"},error_page:{title:"エラーが発生しました",message:"申し訳ありませんが、このページの読み込み中に問題が発生しました。以下をお試しください：",back_home:"ホームに戻る"},common:{loading:"ロード中...",error:"エラー",success:"成功",confirm:"確認",cancel:"キャンセル",save:"保存",delete:"削除",edit:"編集",network_error:"ネットワークエラー、接続を確認してください",logout:"ログアウト",user_not_found:"ユーザーが見つかりません",invalid_amount:"無効な金額"},user:{welcome:"ようこそ",balance:"口座残高",recent_transactions:"最近の取引",no_transactions:"取引履歴がありません"},device_management:{title:"デバイス管理",description:"ログインしたデバイスを管理します。信頼できるデバイスは二次認証なしでログインできます。",current_device:"現在のデバイス",last_active:"最終アクティブ:",just_now:"たった今",minutes_ago:"分前",hours_ago:"時間前",days_ago:"日前",trust_device:"デバイスを信頼する",untrust_device:"デバイスの信頼を解除",trusted:"信頼済み",remove:"削除",remove_tooltip:"ログイン済みデバイスから削除",confirm_remove:"削除を確認",cancel:"キャンセル",loading:"デバイスリストを読み込み中...",no_devices:"ログイン済みのデバイスが見つかりません",error:"デバイスリストを読み込めません。後でもう一度お試しください",remove_failed:"デバイスの削除に失敗しました",trust_failed:"デバイスの信頼設定の変更に失敗しました",sign_out_all:"他のすべてのデバイスからログアウト"}};if(!t.isInitialized){const e=localStorage.getItem("i18nextLng")||"zh";t.use(P).init({debug:!1,resources:{en:{translation:A},zh:{translation:L},ja:{translation:T}},lng:e,fallbackLng:"zh",interpolation:{escapeValue:!1},react:{useSuspense:!1}}),localStorage.getItem("i18nextLng")||localStorage.setItem("i18nextLng","zh"),t.on("languageChanged",(e=>{localStorage.setItem("i18nextLng",e),(e=>{const t=new CustomEvent("app-language-changed",{detail:{language:e},bubbles:!0,composed:!0});document.dispatchEvent(t)})(e)}))}const q=n(v(((e,t)=>({currentUser:null,_hasHydrated:!1,hydrate:async()=>{try{const t=localStorage.getItem("app-storage");t&&e(JSON.parse(t))}catch(t){}q.setState({_hasHydrated:!0})},theme:"light",currentLanguage:"zh",setLanguage:t=>e({currentLanguage:t}),toggleTheme:n=>{const r=n||("light"===t().theme?"dark":"light");return e({theme:r}),document.documentElement.setAttribute("data-theme",r),r},verifyUser:async e=>{await new Promise((e=>setTimeout(e,300)));const n=t().users;return n&&Object.values(n).some((t=>t.username===e))},verifyTotp:async(e,t)=>(await new Promise((e=>setTimeout(e,700))),!0),register:async n=>{e({loading:!0});try{await new Promise((e=>setTimeout(e,700)));const r=t().users;if(r&&Object.values(r).some((e=>e.username===n.username)))throw new Error("用户名已存在，请选择其他用户名");const a={id:Date.now(),username:n.username,password:n.password,role:n.role||"user",balance:n.balance||0};return e((e=>({users:{...e.users,[n.username]:a}}))),a}catch(r){throw r}finally{e({loading:!1})}},initiateQrLogin:async()=>{await new Promise((e=>setTimeout(e,500)));return{qrCode:`qr-${Date.now()}-${Math.floor(1e6*Math.random())}`}},checkQrLoginStatus:async t=>{await new Promise((e=>setTimeout(e,300)));const n=Math.random();if(n<.05){const t={id:888,username:"qr-user",role:"user",balance:500};return e((e=>({users:{...e.users,"qr-user":t},currentUser:t}))),{status:"success",deviceId:`device-${Date.now()}`,role:"user"}}return n<.15?{status:"scanned"}:{status:"pending"}},login:async n=>{e({loading:!0});try{await new Promise((e=>setTimeout(e,500)));const r=t().users;if(n.totpCode){0;const t=r&&Object.values(r).find((e=>e.username===n.username));if(t)return e({currentUser:t}),t}else{const t=r&&Object.values(r).find((e=>e.username===n.username&&e.password===n.password));if(t)return e({currentUser:t}),t}throw new Error("登录失败，用户名或验证码无效")}catch(r){throw r}finally{e({loading:!1})}},logout:()=>e({currentUser:null}),loading:!1,users:{user:{id:1,username:"user",password:"pass",role:"user",balance:1e3},merchant:{id:2,username:"merchant",password:"pass",role:"merchant",balance:5e3},admin:{id:3,username:"admin",password:"pass",role:"admin",balance:1e4}},transactions:[],exchangeRate:1,fetchExchangeRate:async()=>{e({loading:!0});try{await new Promise((e=>setTimeout(e,500))),e({exchangeRate:6.8})}catch(t){}finally{e({loading:!1})}},fetchTransactions:async()=>{e({loading:!0});try{await new Promise((e=>setTimeout(e,300)))}catch(t){}finally{e({loading:!1})}},updateUserBalance:async t=>{try{return e({loading:!0}),await new Promise((e=>setTimeout(e,300))),e((e=>{var n;const r=JSON.parse(JSON.stringify(e.users)),a=r[t.username];if(!a)throw new Error("用户不存在");if(isNaN(t.amount))throw new Error("无效的金额");const o=a.balance||0;a.balance=Number(t.amount);let s=e.currentUser;s&&s.username===t.username&&(s={...s,balance:a.balance});const i={id:Date.now(),timestamp:(new Date).toISOString(),type:t.transactionType||"余额调整",operator:(null==(n=e.currentUser)?void 0:n.username)||"system",username:t.username,amount:a.balance-o,balanceAfter:a.balance,merchant:t.merchantInfo?{id:t.merchantInfo.id||"unknown",name:t.merchantInfo.name||"unknown"}:void 0};return{users:r,currentUser:s,transactions:[...e.transactions,i]}})),!0}catch(n){throw n}finally{e({loading:!1})}}})),{name:"app-storage",storage:{getItem:e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}},setItem:(e,t)=>{try{const n=()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(n instanceof Element||n instanceof HTMLElement||n instanceof Node)return;if(t.startsWith("__")||t.startsWith("_react")||"dom"===t||"parent"===t||"element"===t||"ref"===t)return;if(e.has(n))return"[Circular]";e.add(n)}return n instanceof Date?n.toISOString():n}},r=JSON.stringify(t,n());localStorage.setItem(e,r)}catch(n){try{const n={theme:t.theme,currentLanguage:t.currentLanguage,users:t.users?Object.entries(t.users).reduce(((e,[t,n])=>(e[t]={id:n.id,username:n.username,role:n.role,balance:n.balance},e)),{}):{},transactions:(t.transactions||[]).map((e=>({id:e.id,timestamp:e.timestamp,type:e.type,username:e.username,amount:e.amount})))};localStorage.setItem(e,JSON.stringify(n))}catch(r){}}},removeItem:e=>localStorage.removeItem(e)},partialize:e=>({users:e.users,currentLanguage:e.currentLanguage,theme:e.theme,transactions:e.transactions})})),D={},H=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=e(t.map((e=>{if((e=function(e){return"/"+e}(e))in D)return;D[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise(((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))};var U={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B=r.createContext&&r.createContext(U),F=["attr","size","title"];function V(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return e&&e.map(((e,t)=>r.createElement(e.tag,Y({key:t},e.attr),J(e.child))))}function G(e){return t=>r.createElement(X,$({attr:Y({},e.attr)},t),J(e.child))}function X(e){var t=t=>{var n,{attr:a,size:o,title:s}=e,i=V(e,F),l=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",$({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,i,{className:n,style:Y(Y({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==B?r.createElement(B.Consumer,null,(e=>t(e))):t(U)}function Z(e){return G({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function K(e){return G({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function ee(e){return G({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function te(e){return G({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(e)}function ne(e){return G({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function re(e){return G({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(e)}function ae(e){return G({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(e)}function oe(e){return G({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}function se(e){return G({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(e)}function ie(e){return G({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(e)}function le(e){return G({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(e)}function ce(e){return G({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(e)}function ue(e){return G({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM224 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}function de(e){return G({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function me(e){return G({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function ge(e){return G({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}var he,pe,fe={exports:{}},ve={};var be=(pe||(pe=1,fe.exports=function(){if(he)return ve;he=1;var e=a(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,n,a){var i,l={},c=null,u=null;for(i in void 0!==a&&(c=""+a),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,i)&&!s.hasOwnProperty(i)&&(l[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===l[i]&&(l[i]=n[i]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:o.current}}return ve.Fragment=n,ve.jsx=i,ve.jsxs=i,ve}()),fe.exports);function ye(){const{t:t,i18n:n}=O(),r=s(),[a,o]=e.useState(null),{theme:c,toggleTheme:u,currentUser:d,logout:m}=q((e=>({theme:e.theme,toggleTheme:e.toggleTheme,currentUser:e.currentUser,logout:e.logout})));e.useEffect((()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,n=e||(t?"dark":"light");document.documentElement.setAttribute("data-theme",n),c!==n&&u&&u(n),g()}),[]);const g=()=>{try{const e=1920,t=1080,n=document.createElement("canvas");n.width=e,n.height=t;const r=n.getContext("2d"),a=r.createLinearGradient(0,0,e,t);a.addColorStop(0,"#8b5e3c"),a.addColorStop(.5,"#d4b483"),a.addColorStop(1,"#8b5e3c"),r.fillStyle=a,r.fillRect(0,0,e,t);for(let o=0;o<20;o++){r.beginPath();const n=Math.random()*e,a=Math.random()*t,o=20+40*Math.random(),s=.1+.2*Math.random();r.arc(n,a,o,0,2*Math.PI),r.fillStyle=`rgba(255, 215, 0, ${s})`,r.fill(),r.beginPath(),r.arc(n,a,.8*o,0,2*Math.PI),r.strokeStyle=`rgba(255, 255, 255, ${1.5*s})`,r.lineWidth=2,r.stroke()}const s=n.toDataURL("image/png");o(s);const i=document.createElement("style");i.textContent=`\n        :root {\n          --default-bg-pc: ${s};\n          --default-bg-phone: ${s};\n        }\n      `,document.head.appendChild(i)}catch(e){}};e.useEffect((()=>{const e=new Image;e.onload=()=>{document.documentElement.style.setProperty("--background-image-desktop",'url("/images/background-pc.jpg")'),document.documentElement.style.setProperty("--background-image-mobile",'url("/images/background-phone.jpeg")')},e.onerror=()=>{a&&(document.documentElement.style.setProperty("--background-image-desktop",`url(${a})`),document.documentElement.style.setProperty("--background-image-mobile",`url(${a})`))},e.src="/images/background-pc.jpg"}),[a]),e.useEffect((()=>{document.documentElement.setAttribute("data-theme",c)}),[c]),e.useEffect((()=>{}),[n.language,t,d]);return be.jsxs("div",{className:"app-container","data-theme":c,children:[be.jsx("div",{className:"page-background"}),be.jsxs("nav",{className:"main-nav",children:[be.jsx("div",{className:"nav-links",children:be.jsxs(be.Fragment,{children:[be.jsx(l,{to:"/",className:"nav-link",children:t("nav.login")}),be.jsx(l,{to:"/user",className:"nav-link",children:t("nav.user_panel")}),be.jsx(l,{to:"/merchant",className:"nav-link",children:t("nav.merchant_panel")}),be.jsx(l,{to:"/admin",className:"nav-link",children:t("nav.admin_panel")}),be.jsx(l,{to:"/payment",className:"nav-link",children:t("nav.payment")})]})}),be.jsxs("div",{className:"nav-controls",children:[be.jsxs("select",{className:"language-select",value:n.language,onChange:e=>{return t=e.target.value,n.changeLanguage(t),void localStorage.setItem("i18nextLng",t);var t},"aria-label":t("language.select"),children:[be.jsx("option",{value:"zh",children:"中文"}),be.jsx("option",{value:"en",children:"English"}),be.jsx("option",{value:"ja",children:"日本語"})]}),be.jsx("button",{className:"theme-toggle",onClick:u,"aria-label":t("theme.toggle"),children:"light"===c?be.jsx(se,{}):be.jsx(ce,{})}),d&&be.jsx("button",{className:"logout-button",onClick:()=>{m(),r("/")},"aria-label":t("common.logout"),children:t("common.logout")})]})]}),be.jsx("main",{className:"main-content",children:be.jsx(i,{})})]})}function _e(){const e=s(),{t:t}=O();return be.jsx("div",{className:"error-page",children:be.jsxs("div",{className:"content-with-glass",children:[be.jsx("h1",{children:t("error_page.title",{fallback:"出错了"})}),be.jsx("p",{children:t("error_page.message",{fallback:"抱歉，发生了一些问题"})}),be.jsx("button",{onClick:()=>e("/"),className:"home-button",children:t("error_page.back_home",{fallback:"返回首页"})})]})})}const we=()=>be.jsxs("div",{className:"loading-overlay",children:[be.jsx("div",{className:"spinner"}),be.jsx("p",{children:"加载中..."}),be.jsx("style",{jsx:"true",children:"\n        .loading-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(255, 255, 255, 0.8);\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          z-index: 9999;\n        }\n        .spinner {\n          width: 40px;\n          height: 40px;\n          margin-bottom: 10px;\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #3498db;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]});var xe,ke,Ee=Object.defineProperty,Se=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Ce=(e,t,n)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pe=(e,t)=>{for(var n in t||(t={}))Ne.call(t,n)&&Ce(e,n,t[n]);if(Se)for(var n of Se(t))je.call(t,n)&&Ce(e,n,t[n]);return e},Me=(e,t)=>{var n={};for(var r in e)Ne.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Se)for(var r of Se(e))t.indexOf(r)<0&&je.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,o){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let s=[];for(let t=0;t<this.size;t++)s.push(!1);for(let t=0;t<this.size;t++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();const i=this.addEccAndInterleave(r);if(this.drawCodewords(i),-1==o){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(o=t,e=n),this.applyMask(t)}}a(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(n,r){const a=e.QrSegment.makeSegments(n);return t.encodeSegments(a,r)}static encodeBinary(n,r){const a=e.QrSegment.makeBytes(n);return t.encodeSegments([a],r)}static encodeSegments(e,r,o=1,i=40,l=-1,c=!0){if(!(t.MIN_VERSION<=o&&o<=i&&i<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let u,d;for(u=o;;u++){const n=8*t.getNumDataCodewords(u,r),a=s.getTotalBits(e,u);if(a<=n){d=a;break}if(u>=i)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&d<=8*t.getNumDataCodewords(u,n)&&(r=n);let m=[];for(const t of e){n(t.mode.modeBits,4,m),n(t.numChars,t.mode.numCharCountBits(u),m);for(const e of t.getData())m.push(e)}a(m.length==d);const g=8*t.getNumDataCodewords(u,r);a(m.length<=g),n(0,Math.min(4,g-m.length),m),n(0,(8-m.length%8)%8,m),a(m.length%8==0);for(let t=236;m.length<g;t^=253)n(t,8,m);let h=[];for(;8*h.length<m.length;)h.push(0);return m.forEach(((e,t)=>h[t>>>3]|=e<<7-(7&t))),new t(u,r,h,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const o=21522^(t<<10|n);a(o>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,r(o,a));this.setFunctionModule(8,7,r(o,6)),this.setFunctionModule(8,8,r(o,7)),this.setFunctionModule(7,8,r(o,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,r(o,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,r(o,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,r(o,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;a(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),a=this.size-11+n%3,o=Math.floor(n/3);this.setFunctionModule(a,o,e),this.setFunctionModule(o,a,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(n)),o=e+r,s=t+n;0<=o&&o<this.size&&0<=s&&s<this.size&&this.setFunctionModule(o,s,2!=a&&4!=a)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const o=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],s=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],i=Math.floor(t.getNumRawDataModules(n)/8),l=o-i%o,c=Math.floor(i/o);let u=[];const d=t.reedSolomonComputeDivisor(s);for(let a=0,g=0;a<o;a++){let n=e.slice(g,g+c-s+(a<l?0:1));g+=n.length;const r=t.reedSolomonComputeRemainder(n,d);a<l&&n.push(0),u.push(n.concat(r))}let m=[];for(let t=0;t<u[0].length;t++)u.forEach(((e,n)=>{(t!=c-s||n>=l)&&m.push(e[t])}));return a(m.length==i),m}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let a=0;a<this.size;a++)for(let o=0;o<2;o++){const s=t-o,i=!(t+1&2)?this.size-1-a:a;!this.isFunction[i][s]&&n<8*e.length&&(this.modules[i][s]=r(e[n>>>3],7-(7&n)),n++)}}a(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let n=!1,r=0,o=[0,0,0,0,0,0,0];for(let s=0;s<this.size;s++)this.modules[a][s]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,o),n||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),n=this.modules[a][s],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,o)*t.PENALTY_N3}for(let a=0;a<this.size;a++){let n=!1,r=0,o=[0,0,0,0,0,0,0];for(let s=0;s<this.size;s++)this.modules[s][a]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,o),n||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),n=this.modules[s][a],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,o)*t.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let n=0;n<this.size-1;n++){const r=this.modules[a][n];r==this.modules[a][n+1]&&r==this.modules[a+1][n]&&r==this.modules[a+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce(((e,t)=>e+(t?1:0)),n);const r=this.size*this.size,o=Math.ceil(Math.abs(20*n-10*r)/r)-1;return a(0<=o&&o<=9),e+=o*t.PENALTY_N4,a(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return a(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let a=0;a<e;a++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map((e=>0));for(const a of e){const e=a^r.shift();r.push(0),n.forEach(((n,a)=>r[a]^=t.reedSolomonMultiply(n,e)))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return a(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];a(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return!!(e>>>t&1)}function a(e){if(!e)throw new Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;const o=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const a=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+a),10),3*a+1,r),e+=a}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,a=[];for(r=0;r+2<=t.length;r+=2){let o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(o,11,a)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,a),new e(e.Mode.ALPHANUMERIC,t.length,a)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=o;e.QrSegment=o})(xe||(xe={})),(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})((ke=xe||(xe={})).QrCode||(ke.QrCode={})),(e=>{(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(e.QrSegment||(e.QrSegment={}))})(xe||(xe={}));var Re=xe,Ie={L:Re.QrCode.Ecc.LOW,M:Re.QrCode.Ecc.MEDIUM,Q:Re.QrCode.Ecc.QUARTILE,H:Re.QrCode.Ecc.HIGH},Oe=128,ze="L",Ae="#FFFFFF",Le="#000000",Te=!1,qe=1;
/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */function De(e,t=0){const n=[];return e.forEach((function(e,r){let a=null;e.forEach((function(o,s){if(!o&&null!==a)return n.push(`M${a+t} ${r+t}h${s-a}v1H${a+t}z`),void(a=null);if(s!==e.length-1)o&&null===a&&(a=s);else{if(!o)return;null===a?n.push(`M${s+t},${r+t} h1v1H${s+t}z`):n.push(`M${a+t},${r+t} h${s+1-a}v1H${a+t}z`)}}))})),n.join("")}function He(e,t){return e.slice().map(((e,n)=>n<t.y||n>=t.y+t.h?e:e.map(((e,n)=>(n<t.x||n>=t.x+t.w)&&e))))}function Ue({value:e,level:t,minVersion:n,includeMargin:a,marginSize:o,imageSettings:s,size:i,boostLevel:l}){let c=r.useMemo((()=>{const r=(Array.isArray(e)?e:[e]).reduce(((e,t)=>(e.push(...Re.QrSegment.makeSegments(t)),e)),[]);return Re.QrCode.encodeSegments(r,Ie[t],n,void 0,void 0,l)}),[e,t,n,l]);const{cells:u,margin:d,numCells:m,calculatedImageSettings:g}=r.useMemo((()=>{let e=c.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(a,o),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;const a=e.length+2*n,o=Math.floor(.1*t),s=a/t,i=(r.width||o)*s,l=(r.height||o)*s,c=null==r.x?e.length/2-i/2:r.x*s,u=null==r.y?e.length/2-l/2:r.y*s,d=null==r.opacity?1:r.opacity;let m=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(u);m={x:e,y:t,w:Math.ceil(i+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:i,excavation:m,opacity:d,crossOrigin:r.crossOrigin}}(e,i,t,s);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}}),[c,i,s,a,o]);return{qrcode:c,margin:d,cells:u,numCells:m,calculatedImageSettings:g}}var Be=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();r.forwardRef((function(e,t){const n=e,{value:a,size:o=Oe,level:s=ze,bgColor:i=Ae,fgColor:l=Le,includeMargin:c=Te,minVersion:u=qe,boostLevel:d,marginSize:m,imageSettings:g}=n,h=Me(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=h,f=Me(h,["style"]),v=null==g?void 0:g.src,b=r.useRef(null),y=r.useRef(null),_=r.useCallback((e=>{b.current=e,"function"==typeof t?t(e):t&&(t.current=e)}),[t]),[w,x]=r.useState(!1),{margin:k,cells:E,numCells:S,calculatedImageSettings:N}=Ue({value:a,level:s,minVersion:u,boostLevel:d,includeMargin:c,marginSize:m,imageSettings:g,size:o});r.useEffect((()=>{if(null!=b.current){const e=b.current,t=e.getContext("2d");if(!t)return;let n=E;const r=y.current,a=null!=N&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;a&&null!=N.excavation&&(n=He(E,N.excavation));const s=window.devicePixelRatio||1;e.height=e.width=o*s;const c=o/S*s;t.scale(c,c),t.fillStyle=i,t.fillRect(0,0,S,S),t.fillStyle=l,Be?t.fill(new Path2D(De(n,k))):E.forEach((function(e,n){e.forEach((function(e,r){e&&t.fillRect(r+k,n+k,1,1)}))})),N&&(t.globalAlpha=N.opacity),a&&t.drawImage(r,N.x+k,N.y+k,N.w,N.h)}})),r.useEffect((()=>{x(!1)}),[v]);const j=Pe({height:o,width:o},p);let C=null;return null!=v&&(C=r.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{x(!0)},ref:y,crossOrigin:null==N?void 0:N.crossOrigin})),r.createElement(r.Fragment,null,r.createElement("canvas",Pe({style:j,height:o,width:o,ref:_,role:"img"},f)),C)})).displayName="QRCodeCanvas";var Fe=r.forwardRef((function(e,t){const n=e,{value:a,size:o=Oe,level:s=ze,bgColor:i=Ae,fgColor:l=Le,includeMargin:c=Te,minVersion:u=qe,boostLevel:d,title:m,marginSize:g,imageSettings:h}=n,p=Me(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:v,numCells:b,calculatedImageSettings:y}=Ue({value:a,level:s,minVersion:u,boostLevel:d,includeMargin:c,marginSize:g,imageSettings:h,size:o});let _=v,w=null;null!=h&&null!=y&&(null!=y.excavation&&(_=He(v,y.excavation)),w=r.createElement("image",{href:h.src,height:y.h,width:y.w,x:y.x+f,y:y.y+f,preserveAspectRatio:"none",opacity:y.opacity,crossOrigin:y.crossOrigin}));const x=De(_,f);return r.createElement("svg",Pe({height:o,width:o,viewBox:`0 0 ${b} ${b}`,ref:t,role:"img"},p),!!m&&r.createElement("title",null,m),r.createElement("path",{fill:i,d:`M0,0 h${b}v${b}H0z`,shapeRendering:"crispEdges"}),r.createElement("path",{fill:l,d:x,shapeRendering:"crispEdges"}),w)}));Fe.displayName="QRCodeSVG";const Ve="username",$e="totp_verify",Qe="qr_login",Ye="register";function We(){const[t,n]=e.useState({username:"",totpCode:"",password:"",confirmPassword:"",role:"user"}),[r,a]=e.useState({}),[o,i]=e.useState(Ve),[l,c]=e.useState(""),[u,d]=e.useState(!1),[m,g]=e.useState(!1),[h,p]=e.useState("pending"),f=e.useRef(null),{t:v,i18n:b}=O(),y=s(),{login:_,register:w,verifyUser:x,verifyTotp:k,initiateQrLogin:E,checkQrLoginStatus:S,theme:N,toggleTheme:j}=q((e=>({login:e.login,register:e.register||(e=>Promise.resolve({...e,id:Date.now()})),verifyUser:e.verifyUser||(()=>Promise.resolve(!0)),verifyTotp:e.verifyTotp||(()=>Promise.resolve(!0)),initiateQrLogin:e.initiateQrLogin||(()=>Promise.resolve({qrCode:"demo-code"})),checkQrLoginStatus:e.checkQrLoginStatus||(()=>Promise.resolve({status:"pending"})),theme:e.theme,toggleTheme:e.toggleTheme}))),C={[Ve]:v("login.title_username"),[$e]:v("login.title_verification"),[Qe]:v("login.title_qr_login"),[Ye]:v("login.title_register")};e.useEffect((()=>(o===Qe?P():f.current&&(clearInterval(f.current),f.current=null),()=>{f.current&&(clearInterval(f.current),f.current=null)})),[o]);const P=async()=>{try{g(!0),p("pending");const e=await E();c(`pigcoin://qr-login/${e.qrCode}`),M(e.qrCode)}catch(e){a({submit:v("login.qr_init_failed")})}finally{g(!1)}},M=e=>{f.current&&clearInterval(f.current),f.current=setInterval((async()=>{try{const n=await S(e);if(p(n.status),"success"===n.status){clearInterval(f.current),f.current=null;const e={deviceId:n.deviceId||"current-device",lastLogin:(new Date).toISOString()};try{localStorage.setItem("trusted_device",JSON.stringify(e))}catch(t){localStorage.setItem("trusted_device_id",n.deviceId||"current-device"),localStorage.setItem("trusted_device_last_login",(new Date).toISOString())}setTimeout((()=>{y(n.role?`/${n.role}`:"/user")}),1e3)}}catch(t){}}),2e3)},R=(e,t)=>{n((n=>({...n,[e]:t}))),r[e]&&a((t=>({...t,[e]:""})))};return be.jsxs("div",{className:"login-container",children:[be.jsx("div",{className:"login-background"}),be.jsxs("div",{className:"login-card fade-in",children:[be.jsx("h2",{className:"slide-in-up",children:C[o]}),r.submit&&be.jsx("div",{className:"error-message slide-in-up",children:r.submit}),be.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};switch(o){case Ve:t.username||(e.username=v("login.username_required"));break;case $e:t.totpCode?6!==t.totpCode.length&&(e.totpCode=v("login.totp_length_error")):e.totpCode=v("login.totp_required");break;case Ye:t.username||(e.username=v("login.username_required")),t.password||(e.password=v("login.password_required")),t.confirmPassword||(e.confirmPassword=v("login.confirm_password_required")),t.password!==t.confirmPassword&&(e.confirmPassword=v("login.passwords_not_match"))}return a(e),0===Object.keys(e).length})()){g(!0),a({});try{switch(o){case Ve:if(!(await x(t.username)))throw new Error(v("login.user_not_found"));i($e);break;case $e:if(!(await k(t.username,t.totpCode)))throw new Error(v("login.totp_invalid"));const e=await _({username:t.username,totpCode:t.totpCode}),a={deviceId:"current-device",lastLogin:(new Date).toISOString()};try{localStorage.setItem("trusted_device",JSON.stringify(a))}catch(r){localStorage.setItem("trusted_device_id","current-device"),localStorage.setItem("trusted_device_last_login",(new Date).toISOString())}y((null==e?void 0:e.role)?`/${e.role}`:"/user");break;case Ye:if(!(await w({username:t.username,password:t.password,role:t.role||"user",balance:0})))throw new Error(v("login.register_failed"));alert(v("login.register_success")),n({...t,password:"",confirmPassword:""}),i(Ve)}}catch(r){a({submit:r.message||v("login.login_failed")})}finally{g(!1)}}},className:"login-form",children:(()=>{switch(o){case Ve:return be.jsx("div",{className:"login-step username-step slide-in-up",children:be.jsxs("div",{className:"input-container",children:[be.jsxs("div",{className:"input-group centered-input",children:[be.jsx(ge,{className:"input-icon"}),be.jsx("input",{type:"text",name:"username",value:t.username,onChange:e=>R("username",e.target.value),placeholder:v("login.username_placeholder"),className:r.username?"error":"",autoFocus:!0}),be.jsx("button",{type:"submit",className:"next-button inline-button",disabled:m,children:m?be.jsx(we,{visible:!0}):be.jsx(K,{})})]}),r.username&&be.jsx("div",{className:"field-error",children:r.username})]})});case $e:return be.jsxs("div",{className:"login-step totp-step slide-in-up",children:[be.jsxs("div",{className:"user-info",children:[be.jsx("button",{type:"button",className:"back-button arrow-button",onClick:()=>i(Ve),children:be.jsx(Z,{})}),be.jsx("span",{className:"username",children:t.username})]}),be.jsxs("div",{className:"input-container",children:[be.jsxs("div",{className:"input-group centered-input",children:[be.jsx(re,{className:"input-icon"}),be.jsx("input",{type:"text",name:"totpCode",value:t.totpCode,onChange:e=>R("totpCode",e.target.value.replace(/\D/g,"")),placeholder:v("login.totp_placeholder"),className:r.totpCode?"error":"",maxLength:6,pattern:"[0-9]*",inputMode:"numeric",autoFocus:!0}),be.jsx("button",{type:"submit",className:"next-button inline-button",disabled:m,children:m?be.jsx(we,{visible:!0}):be.jsx(K,{})})]}),r.totpCode&&be.jsx("div",{className:"field-error",children:r.totpCode})]})]});case Qe:return be.jsxs("div",{className:"qr-login-container stagger-item",children:[be.jsx("div",{className:"qr-code-wrapper "+("scanned"===h?"scanned":""),children:m?be.jsx(we,{visible:!0}):be.jsxs(be.Fragment,{children:[be.jsx(Fe,{value:l||"https://example.com",size:200,level:"H",includeMargin:!0,renderas:"svg",className:"qr-code"}),"scanned"===h&&be.jsx("div",{className:"qr-scanned-overlay",children:be.jsx("p",{children:v("login.qr_scanned")})})]})}),be.jsx("p",{className:"qr-login-hint stagger-item",children:v("login.qr_scan_hint")}),be.jsxs("button",{type:"button",className:"refresh-qr-btn stagger-item",onClick:P,disabled:m||"success"===h,children:[be.jsx(le,{})," ",v("login.refresh_qr")]})]});case Ye:return be.jsxs("div",{className:"login-step register-step slide-in-up",children:[be.jsxs("div",{className:"input-container register-input-container",children:[be.jsxs("div",{className:"input-group",children:[be.jsx(ge,{className:"input-icon"}),be.jsx("input",{type:"text",name:"username",value:t.username,onChange:e=>R("username",e.target.value),placeholder:v("login.username_placeholder"),className:r.username?"error":"",autoFocus:!0})]}),r.username&&be.jsx("div",{className:"field-error",children:r.username}),be.jsxs("div",{className:"input-group",children:[be.jsx(re,{className:"input-icon"}),be.jsx("input",{type:"password",name:"password",value:t.password,onChange:e=>R("password",e.target.value),placeholder:v("login.password_placeholder"),className:r.password?"error":""})]}),r.password&&be.jsx("div",{className:"field-error",children:r.password}),be.jsxs("div",{className:"input-group",children:[be.jsx(re,{className:"input-icon"}),be.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:e=>R("confirmPassword",e.target.value),placeholder:v("login.confirm_password_placeholder"),className:r.confirmPassword?"error":""})]}),r.confirmPassword&&be.jsx("div",{className:"field-error",children:r.confirmPassword}),be.jsxs("div",{className:"role-selection",children:[be.jsx("label",{children:v("login.select_role")}),be.jsxs("select",{name:"role",value:t.role,onChange:e=>R("role",e.target.value),children:[be.jsx("option",{value:"user",children:v("login.role_user")}),be.jsx("option",{value:"merchant",children:v("login.role_merchant")})]})]})]}),be.jsx("button",{type:"submit",className:"register-button",disabled:m,children:v(m?"login.processing":"login.register_button")})]})}})()}),be.jsxs("div",{className:"login-options slide-in-up",children:[o!==Ye&&be.jsx("button",{type:"button",className:"toggle-qr-login",onClick:()=>{u?(i(Ve),d(!1)):(i(Qe),d(!0))},children:u?v("login.use_totp_login"):be.jsxs(be.Fragment,{children:[be.jsx(ie,{style:{marginRight:"8px"}})," ",v("login.use_qr_login")]})}),be.jsx("button",{type:"button",className:o===Ye?"toggle-login":"toggle-register",onClick:()=>{o===Ye?i(Ve):(i(Ye),d(!1))},children:o===Ye?v("login.already_have_account"):be.jsxs(be.Fragment,{children:[be.jsx(me,{style:{marginRight:"8px"}})," ",v("login.no_account_register")]})})]})]}),be.jsx("style",{jsx:"true",children:'\n        .register-step {\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n          margin-left: 20px;\n        }\n        \n        .register-input-container {\n          display: flex;\n          flex-direction: column;\n          gap: 15px;\n          margin-bottom: 20px;\n          width: 100%;\n          max-width: 320px;\n        }\n        \n        .register-button {\n          width: 100%;\n          max-width: 320px;\n          padding: 12px;\n          background-color: var(--primary-color, #8b5e3c);\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 16px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: background-color 0.3s;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          margin-top: 10px;\n        }\n        \n        .register-button:hover:not(:disabled) {\n          background-color: var(--primary-color-dark, #6b4e2c);\n        }\n        \n        .register-button:disabled {\n          background-color: var(--disabled-color, #cccccc);\n          cursor: not-allowed;\n        }\n        \n        .role-selection {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          width: 100%;\n        }\n        \n        .role-selection label {\n          font-size: 14px;\n          color: var(--text-secondary, #666666);\n        }\n        \n        .role-selection select {\n          padding: 10px;\n          border-radius: 4px;\n          border: 1px solid var(--border-color, #ccc);\n          background-color: var(--input-bg, #ffffff);\n          color: var(--text-primary, #333333);\n          width: 100%;\n        }\n        \n        .toggle-register, .toggle-login {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: none;\n          border: 1px solid var(--border-color, rgba(0, 0, 0, 0.1));\n          border-radius: 20px;\n          color: var(--primary-color, #8b5e3c);\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          padding: 8px 15px;\n          transition: all 0.2s ease;\n          background-color: var(--button-bg, rgba(255, 255, 255, 0.9));\n          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n        }\n        \n        .toggle-register:hover, .toggle-login:hover {\n          color: var(--primary-color-dark, #6b4e2c);\n          background-color: var(--button-bg-hover, rgba(255, 255, 255, 1));\n          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);\n        }\n        \n        .login-options {\n          display: flex;\n          justify-content: center;\n          margin-top: 20px;\n          gap: 15px;\n        }\n        \n        /* 美化输入框和提示文字样式 */\n        .input-group {\n          position: relative;\n          margin-bottom: 5px;\n          transition: all 0.3s ease;\n        }\n        \n        .input-group input {\n          width: 100%;\n          padding: 12px 15px 12px 40px;\n          padding-right: 50px;\n          border: 1px solid var(--border-color, rgba(0, 0, 0, 0.1));\n          border-radius: 8px;\n          background-color: var(--input-bg, rgba(255, 255, 255, 0.8));\n          color: var(--text-primary, #333);\n          font-size: 16px;\n          transition: all 0.3s ease;\n          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n        }\n        \n        .input-group input:focus {\n          outline: none;\n          border-color: var(--primary-color, #8b5e3c);\n          box-shadow: 0 0 0 2px rgba(139, 94, 60, 0.2);\n          background-color: var(--input-bg-focus, #fff);\n        }\n        \n        /* 占位符文本样式 */\n        .input-group input::placeholder {\n          color: var(--placeholder-color, #aaa);\n          font-style: italic;\n          transition: all 0.3s ease;\n          opacity: 0.7;\n        }\n        \n        .input-group input:focus::placeholder {\n          opacity: 0.5;\n          transform: translateY(-2px);\n        }\n        \n        .input-icon {\n          position: absolute;\n          left: 12px;\n          top: 50%;\n          transform: translateY(-50%);\n          color: var(--icon-color, #999);\n          font-size: 18px;\n          transition: all 0.3s ease;\n        }\n        \n        .input-group input:focus + .input-icon,\n        .input-group:hover .input-icon {\n          color: var(--primary-color, #8b5e3c);\n        }\n        \n        .input-group.centered-input {\n          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        \n        /* 错误状态 */\n        .input-group input.error {\n          border-color: var(--error-color, #e53935);\n          background-color: rgba(229, 57, 53, 0.05);\n        }\n        \n        .field-error {\n          font-size: 13px;\n          color: var(--error-color, #e53935);\n          margin-top: 5px;\n          padding-left: 5px;\n          animation: errorShake 0.4s ease;\n        }\n        \n        @keyframes errorShake {\n          0%, 100% { transform: translateX(0); }\n          20%, 60% { transform: translateX(-5px); }\n          40%, 80% { transform: translateX(5px); }\n        }\n        \n        /* 下拉框样式 */\n        .role-selection select {\n          padding: 12px 15px;\n          appearance: none;\n          background-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%238b5e3c\'%3E%3Cpath d=\'M7 10l5 5 5-5z\'/%3E%3C/svg%3E");\n          background-repeat: no-repeat;\n          background-position: right 10px center;\n          background-size: 20px;\n          padding-right: 40px;\n          cursor: pointer;\n          border-radius: 8px;\n          transition: all 0.3s ease;\n        }\n        \n        .role-selection select:focus {\n          outline: none;\n          border-color: var(--primary-color, #8b5e3c);\n          box-shadow: 0 0 0 2px rgba(139, 94, 60, 0.2);\n        }\n        \n        /* 修改按钮优化 */\n        .back-button {\n          background: none;\n          border: 1px solid var(--border-color, rgba(0, 0, 0, 0.1));\n          border-radius: 15px;\n          color: var(--primary-color, #8b5e3c);\n          padding: 5px 10px;\n          font-size: 14px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 8px;\n          background-color: var(--button-bg, rgba(255, 255, 255, 0.8));\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n        \n        .back-button.arrow-button {\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          padding: 0;\n          color: white;\n          background-color: var(--primary-color, #8b5e3c);\n          box-shadow: 0 2px 6px rgba(139, 94, 60, 0.2);\n          position: absolute;\n          left: 0;\n          top: 50%;\n          transform: translateY(-50%);\n          margin-right: 0;\n          z-index: 2;\n        }\n        \n        .back-button.arrow-button:hover {\n          background-color: var(--primary-color-light, #a17649);\n          transform: translateY(-50%) scale(1.05);\n          box-shadow: 0 2px 8px rgba(139, 94, 60, 0.3);\n        }\n        \n        .back-button:hover {\n          background-color: var(--button-bg-hover, rgba(255, 255, 255, 1));\n          color: var(--primary-color-dark, #6b4e2c);\n          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\n          transform: translateY(-1px);\n        }\n        \n        .back-button:active {\n          transform: translateY(0);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n        }\n        \n        .back-button:focus {\n          outline: none;\n          box-shadow: 0 0 0 2px rgba(139, 94, 60, 0.3);\n        }\n        \n        /* 下一步按钮优化 */\n        .next-button {\n          width: 48px;\n          height: 48px;\n          border-radius: 50%;\n          background-color: var(--primary-color, #8b5e3c);\n          color: white;\n          border: none;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: background-color 0.15s ease, box-shadow 0.15s ease;\n          margin-top: 15px;\n          box-shadow: 0 3px 10px rgba(139, 94, 60, 0.3);\n          will-change: transform;\n          -webkit-tap-highlight-color: transparent;\n          backface-visibility: hidden;\n          transform: translateZ(0);\n        }\n        \n        .next-button.inline-button {\n          width: 36px;\n          height: 36px;\n          position: absolute;\n          right: 10px;\n          top: 50%;\n          transform: translateY(-50%) translateZ(0);\n          margin-top: 0;\n          box-shadow: 0 2px 6px rgba(139, 94, 60, 0.2);\n          z-index: 2;\n        }\n        \n        .next-button:hover:not(:disabled),\n        .back-button.arrow-button:hover {\n          background-color: var(--primary-color-light, #a17649);\n          box-shadow: 0 3px 12px rgba(139, 94, 60, 0.4);\n        }\n        \n        .next-button:hover:not(:disabled) {\n          animation: none;\n        }\n        \n        .next-button.inline-button:hover:not(:disabled) {\n          transform: translateY(-50%) translateZ(0);\n        }\n        \n        .next-button:active:not(:disabled),\n        .back-button.arrow-button:active {\n          background-color: var(--primary-color, #8b5e3c);\n          box-shadow: 0 2px 5px rgba(139, 94, 60, 0.3);\n        }\n        \n        .next-button:active:not(:disabled) {\n          animation: button-press-scale-only 0.4s ease forwards;\n        }\n        \n        .next-button.inline-button:active:not(:disabled) {\n          animation: button-press-scale-only 0.4s ease forwards;\n        }\n        \n        /* 用户名步骤下的下一步按钮不使用任何动画或过渡 */\n        .username-step .next-button:active:not(:disabled) {\n          animation: none !important;\n          transition: none !important;\n          transform: none !important;\n        }\n        \n        /* 用户名步骤下的内联下一步按钮不使用任何动画或过渡 */\n        .username-step .next-button.inline-button:active:not(:disabled) {\n          animation: none !important;\n          transition: none !important;\n          transform: none !important;\n        }\n        \n        .back-button.arrow-button:active {\n          animation: button-press-scale-only 0.4s ease forwards;\n          transform: translateY(-50%);\n        }\n        \n        @keyframes button-press {\n          0% { transform: scale(1) translateZ(0); }\n          25% { transform: scale(0.85) translateZ(0); }\n          75% { transform: scale(1.08) translateZ(0); }\n          100% { transform: scale(1) translateZ(0); }\n        }\n        \n        /* 仅缩放的按压动画，用于所有按钮 */\n        @keyframes button-press-scale-only {\n          0% { transform: translateY(-50%) scale(1) translateZ(0); }\n          25% { transform: translateY(-50%) scale(0.85) translateZ(0); }\n          75% { transform: translateY(-50%) scale(1.08) translateZ(0); }\n          100% { transform: translateY(-50%) scale(1) translateZ(0); }\n        }\n        \n        /* 用户名和修改按钮调整 */\n        .user-info {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-bottom: 20px;\n          margin-top: 10px;\n          position: relative;\n          width: 100%;\n          max-width: 320px;\n          margin-left: auto;\n          margin-right: auto;\n          padding: 0 36px;\n        }\n        \n        .username {\n          font-weight: 500;\n          color: var(--text-primary, #333);\n          background-color: var(--highlight-bg, rgba(139, 94, 60, 0.1));\n          padding: 6px 12px;\n          border-radius: 15px;\n          font-size: 14px;\n          text-align: center;\n          position: relative;\n          z-index: 1;\n        }\n        \n        /* 暗黑模式适配 */\n        [data-theme="dark"] .back-button {\n          background-color: var(--button-bg-dark, rgba(30, 30, 30, 0.6));\n          border-color: var(--border-color-dark, rgba(255, 255, 255, 0.1));\n          color: var(--primary-color-light, #c9a87c);\n        }\n        \n        [data-theme="dark"] .back-button.arrow-button {\n          background-color: var(--primary-color, #8b5e3c);\n          color: white;\n        }\n        \n        [data-theme="dark"] .back-button.arrow-button:hover {\n          background-color: var(--primary-color-light, #c9a87c);\n        }\n        \n        [data-theme="dark"] .back-button:hover {\n          background-color: var(--button-bg-dark-hover, rgba(50, 50, 50, 0.8));\n          color: var(--primary-color-lighter, #e5d3b5);\n        }\n        \n        [data-theme="dark"] .next-button {\n          background-color: var(--primary-color, #8b5e3c);\n        }\n        \n        [data-theme="dark"] .next-button:hover:not(:disabled) {\n          background-color: var(--primary-color-dark, #6b4e2c);\n        }\n        \n        [data-theme="dark"] .username {\n          color: var(--text-primary-dark, #e0e0e0);\n          background-color: var(--highlight-bg-dark, rgba(201, 168, 124, 0.15));\n        }\n\n        [data-theme="dark"] .toggle-register, [data-theme="dark"] .toggle-login {\n          color: var(--primary-color-light, #c9a87c);\n          background-color: var(--button-bg-dark, rgba(30, 30, 30, 0.6));\n          border-color: var(--border-color-dark, rgba(255, 255, 255, 0.1));\n        }\n        \n        [data-theme="dark"] .toggle-register:hover, [data-theme="dark"] .toggle-login:hover {\n          color: var(--primary-color-lighter, #e5d3b5);\n          background-color: var(--button-bg-dark-hover, rgba(50, 50, 50, 0.8));\n        }\n         \n        [data-theme="dark"] .input-group input {\n          background-color: var(--input-bg-dark, rgba(30, 30, 30, 0.6));\n          border-color: var(--border-color-dark, rgba(255, 255, 255, 0.1));\n          color: var(--text-primary-dark, #e0e0e0);\n        }\n        \n        [data-theme="dark"] .input-group input:focus {\n          background-color: var(--input-bg-dark-focus, rgba(40, 40, 40, 0.8));\n          border-color: var(--primary-color-light, #c9a87c);\n          box-shadow: 0 0 0 2px rgba(201, 168, 124, 0.2);\n        }\n        \n        [data-theme="dark"] .input-group input::placeholder {\n          color: var(--placeholder-color-dark, #888);\n        }\n        \n        [data-theme="dark"] .input-icon {\n          color: var(--icon-color-dark, #888);\n        }\n        \n        [data-theme="dark"] .input-group input:focus + .input-icon,\n        [data-theme="dark"] .input-group:hover .input-icon {\n          color: var(--primary-color-light, #c9a87c);\n        }\n        \n        [data-theme="dark"] .role-selection select {\n          background-color: var(--input-bg-dark, rgba(30, 30, 30, 0.6));\n          border-color: var(--border-color-dark, rgba(255, 255, 255, 0.1));\n          color: var(--text-primary-dark, #e0e0e0);\n          background-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23c9a87c\'%3E%3Cpath d=\'M7 10l5 5 5-5z\'/%3E%3C/svg%3E");\n        }\n        \n        [data-theme="dark"] .role-selection select:focus {\n          border-color: var(--primary-color-light, #c9a87c);\n          box-shadow: 0 0 0 2px rgba(201, 168, 124, 0.2);\n        }\n\n        /* 加载动画 */\n        .loading-dot {\n          width: 8px;\n          height: 8px;\n          background-color: white;\n          border-radius: 50%;\n          display: inline-block;\n          animation: pulse 1.2s infinite;\n        }\n        \n        @keyframes pulse {\n          0% { transform: scale(0.8); opacity: 0.5; }\n          50% { transform: scale(1.2); opacity: 1; }\n          100% { transform: scale(0.8); opacity: 0.5; }\n        }\n      '})]})}const Je=({tagName:e,props:t={}})=>{const n=r.useRef(null);return r.useEffect((()=>{if(n.current){const r=document.createElement(e);Object.entries(t).forEach((([e,t])=>{r[e]=t})),n.current.innerHTML="",n.current.appendChild(r)}return()=>{n.current&&(n.current.innerHTML="")}}),[e,t]),be.jsx("div",{ref:n})},Ge=r.lazy((()=>H((()=>import("./UserDashboard-B4NPLo6c.js")),__vite__mapDeps([0,1,2,3,4])))),Xe=r.lazy((()=>H((()=>import("./NotFound-DaBATu5q.js")),__vite__mapDeps([5,1,2,3])))),Ze=r.lazy((()=>H((()=>import("./DeviceManagementView-Li6j1AZg.js")),__vite__mapDeps([6,1,2,3,7])))),Ke=async e=>{try{return delete window.webpackHotUpdate,await import(e),!0}catch(t){return!1}},et=c([{path:"/",fallback:be.jsx(we,{visible:!0}),element:be.jsx(ye,{children:be.jsx(i,{})}),errorElement:be.jsx(_e,{}),loader:async({request:e,params:t})=>{var n;await new Promise((e=>{const t=q.subscribe((n=>{n._hasHydrated&&(e(),t())}))}));const{currentUser:r,_hasHydrated:a}=q.getState(),{pathname:o}=new URL(e.url),s=null==(n=e.matchedRoute)?void 0:n.meta;return(null==s?void 0:s.requiresAuth)&&!r?u(`/?redirect=${encodeURIComponent(o)}`):(null==s?void 0:s.role)&&(null==r?void 0:r.role)!==s.role?u("/unauthorized"):null},children:[{path:"/",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(We,{})})},{path:"/login",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(We,{})})},{path:"/payment",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(Je,{tagName:"payment-view"})}),loader:async()=>(await Ke("./views/Payment.js"),null),meta:{requiresAuth:!0}},{path:"/user",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(Ge,{})}),meta:{requiresAuth:!0,role:"user"}},{path:"/device-management",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(Ze,{})}),meta:{requiresAuth:!0}},{path:"/merchant",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(Je,{tagName:"merchant-dashboard"})}),loader:async()=>(await Ke("./views/MerchantDashboard.js"),null),meta:{requiresAuth:!0,role:"merchant"}},{path:"/admin",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(Je,{tagName:"admin-dashboard"})}),loader:async()=>(await Ke("./views/AdminDashboard.js"),null),meta:{requiresAuth:!0,role:"admin"}},{path:"*",element:be.jsx(r.Suspense,{fallback:be.jsx(we,{}),children:be.jsx(Xe,{})})}]}]);window.addEventListener("error",(e=>{}));const tt=()=>{const[n,r]=e.useState(!1);return e.useEffect((()=>{(async()=>{try{!1===q.getState()._hasHydrated&&await q.getState().hydrate(),r(!0)}catch(e){r(!0)}})()}),[]),n?be.jsx(z,{i18n:t,children:be.jsx(d,{router:et})}):be.jsx("div",{className:"loading",children:"加载中..."})};try{const t=document.getElementById("root");if(!t)throw new Error("找不到root元素");h.createRoot(t).render(be.jsx(e.StrictMode,{children:be.jsx(tt,{})}))}catch(nt){}export{ne as F,q as a,ee as b,de as c,te as d,ae as e,ue as f,oe as g,be as j,O as u};
