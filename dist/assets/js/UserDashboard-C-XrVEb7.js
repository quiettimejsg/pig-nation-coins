import{a as s}from"./utils-YxF-Kp8o.js";import{u as e,a,j as n}from"./index-rIlpOBuL.js";import{u as t}from"./router-Buckysma.js";import"./vendor-CXUWDbkB.js";function r(){var r;const{t:i}=e(),c=t(),[l,o]=s.useState([]),{currentUser:d}=a();if(s.useEffect((()=>{if(!d)return void c("/");const s=(a.getState().transactions||[]).filter((s=>s.username===d.username));o(s)}),[d,c]),!d)return null;return n.jsx("div",{className:"user-dashboard-page",children:n.jsxs("div",{className:"content-with-glass",children:[n.jsxs("h1",{children:[i("user.welcome"),", ",d.username,"!"]}),n.jsxs("div",{className:"user-info-card",children:[n.jsxs("div",{className:"user-balance",children:[n.jsx("h2",{children:i("user.balance")}),n.jsxs("p",{className:"balance-amount",children:["¥",null==(r=d.balance)?void 0:r.toFixed(2)]})]}),n.jsx("button",{className:"device-management-button",onClick:()=>{c("/device-management")},children:i("user_dashboard.deviceManagement")})]}),n.jsxs("div",{className:"transactions-section",children:[n.jsx("h2",{children:i("user.recent_transactions")}),0===l.length?n.jsx("p",{className:"no-transactions",children:i("user.no_transactions")}):n.jsx("ul",{className:"transaction-list",children:l.map((s=>n.jsxs("li",{className:`transaction-item ${s.type}`,children:[n.jsxs("div",{className:"transaction-details",children:[n.jsx("span",{className:"transaction-date",children:new Date(s.timestamp).toLocaleDateString()}),n.jsx("span",{className:"transaction-type",children:i(`transaction.${s.type}`)})]}),n.jsxs("span",{className:"transaction-amount "+("payment"===s.type?"negative":"positive"),children:["payment"===s.type?"-":"+"," ¥",s.amount.toFixed(2)]})]},s.id)))})]})]})})}export{r as default};
