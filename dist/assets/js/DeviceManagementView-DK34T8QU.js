import{a as e}from"./utils-YxF-Kp8o.js";import{u as s,j as a,F as t,b as n,d as i,e as c,f as r,g as d,h as l}from"./index-Brcr8s4Z.js";import{u as m}from"./router-Buckysma.js";import"./vendor-CXUWDbkB.js";const o=({onClose:m})=>{const[o,v]=e.useState([]),[u,h]=e.useState(!0),[j,x]=e.useState(null),[g,_]=e.useState(null),{t:p}=s();e.useEffect((()=>{N()}),[]);const N=async()=>{h(!0);try{await new Promise((e=>setTimeout(e,1e3)));const e=[{id:"1",name:"Windows PC - Chrome",type:"desktop",browser:"Chrome",os:"Windows 10",lastActive:new Date(Date.now()-3e5),isCurrent:!0,ipAddress:"192.168.1.1",location:"北京, 中国",trusted:!0}];v(e)}catch(e){x(p("device_management.error"))}finally{h(!1)}},f=e=>{const s=new Date-e,a=Math.floor(s/1e3),t=Math.floor(a/60),n=Math.floor(t/60),i=Math.floor(n/24);return t<1?p("device_management.just_now"):t<60?`${t}${p("device_management.minutes_ago")}`:n<24?`${n}${p("device_management.hours_ago")}`:`${i}${p("device_management.days_ago")}`},C=e=>{switch(e){case"desktop":default:return a.jsx(c,{});case"mobile":return a.jsx(l,{});case"tablet":return a.jsx(d,{});case"laptop":return a.jsx(r,{})}};return a.jsxs("div",{className:"device-manager",children:[a.jsxs("div",{className:"device-manager-header",children:[a.jsx("h2",{children:p("device_management.title")}),a.jsx("button",{className:"close-button",onClick:m,children:"×"})]}),j&&a.jsxs("div",{className:"error-message",children:[a.jsx(t,{})," ",j]}),a.jsx("div",{className:"device-info-header",children:a.jsx("p",{children:p("device_management.description")})}),u?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:p("device_management.loading")})]}):a.jsx("div",{className:"device-list",children:0===o.length?a.jsx("div",{className:"no-devices",children:a.jsx("p",{children:p("device_management.no_devices")})}):o.map((e=>a.jsxs("div",{className:"device-item "+(e.isCurrent?"current-device":""),children:[a.jsx("div",{className:"device-icon",children:C(e.type)}),a.jsxs("div",{className:"device-details",children:[a.jsxs("div",{className:"device-name",children:[e.name,e.isCurrent&&a.jsx("span",{className:"current-tag",children:p("device_management.current_device")})]}),a.jsxs("div",{className:"device-meta",children:[a.jsx("span",{className:"device-os",children:e.os}),a.jsx("span",{className:"dot-separator",children:"•"}),a.jsxs("span",{className:"last-active",children:[p("device_management.last_active")," ",f(e.lastActive)]})]}),a.jsxs("div",{className:"device-location",children:[a.jsxs("span",{className:"ip-address",children:["IP: ",e.ipAddress]}),a.jsx("span",{className:"dot-separator",children:"•"}),a.jsx("span",{className:"location",children:e.location})]})]}),a.jsx("div",{className:"device-actions",children:g===e.id?a.jsxs("div",{className:"confirm-actions",children:[a.jsx("button",{className:"confirm-remove",onClick:()=>(async e=>{try{await new Promise((e=>setTimeout(e,800))),v(o.filter((s=>s.id!==e))),_(null)}catch(s){x(p("device_management.remove_failed"))}})(e.id),children:p("device_management.confirm_remove")}),a.jsx("button",{className:"cancel-remove",onClick:()=>_(null),children:p("device_management.cancel")})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"trust-button "+(e.trusted?"trusted":""),onClick:()=>(async e=>{try{await new Promise((e=>setTimeout(e,800))),v(o.map((s=>s.id===e?{...s,trusted:!s.trusted}:s)))}catch(s){x(p("device_management.trust_failed"))}})(e.id),title:e.trusted?p("device_management.untrust_device"):p("device_management.trust_device"),children:[a.jsx(n,{})," ",e.trusted?p("device_management.trusted"):p("device_management.trust_device")]}),!e.isCurrent&&a.jsxs("button",{className:"remove-button",onClick:()=>_(e.id),title:p("device_management.remove_tooltip"),children:[a.jsx(i,{})," ",p("device_management.remove")]})]})})]},e.id)))}),a.jsx("div",{className:"device-manager-footer",children:a.jsx("button",{className:"sign-out-all-button",onClick:()=>{v(o.filter((e=>e.isCurrent)))},disabled:0===o.filter((e=>!e.isCurrent)).length,children:p("device_management.sign_out_all")})})]})},v=()=>{const e=m();return a.jsx("div",{className:"device-management-view",children:a.jsx(o,{onClose:()=>{e("/user")}})})};export{v as default};
